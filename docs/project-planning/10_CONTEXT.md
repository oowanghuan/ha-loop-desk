# 10_CONTEXT.md
# Project Planning - 项目规划功能

> 版本：v0.1
> 最后更新：2024-12-31
> 状态：Draft
> 负责人：待定

---

## 1. 功能概述

### 1.1 背景

当前 HA Loop Desk 聚焦于**单个 Feature 的阶段管理**（Phase 1-7），但缺少**项目级规划**的能力：

- Dashboard 只能查看现有 features，无法新建
- 没有架构师视角的技术规划界面
- 没有 PM 视角的需求优先级和资源规划
- Phase 0 Foundation 在 GUI 上没有体现

**核心问题**：项目启动阶段的架构规划工作非常复杂，目前完全依赖 CLI 和手工文档，没有可视化支持。

### 1.2 目标

- **目标 1**：在 Dashboard 增加「新建 Feature」能力，支持从 GUI 派生功能模块
- **目标 2**：增加架构师视图，支持技术架构规划、模块划分、依赖分析
- **目标 3**：增加 PM 视图，支持需求优先级排序、里程碑规划

### 1.3 预期价值

| 价值点 | 衡量指标 | 目标值 |
|--------|----------|--------|
| 降低项目启动门槛 | 从规划到第一个 feature 的时间 | 减少 50% |
| 架构可视化 | 模块依赖图可读性 | 一眼看懂 |
| 规划协作效率 | PM/架构师/开发者信息同步成本 | 减少 70% |

---

## 2. 功能范围

### 2.1 包含内容（In Scope）

**架构师视角**：
- 业务分析 → 功能模块划分
- 技术选型 → 前端/后端/基础设施决策
- 架构设计 → 模块边界、接口契约、数据流
- 依赖分析 → feature 之间的依赖关系图

**PM 视角**：
- 需求池管理
- 优先级排序（MoSCoW / 价值-复杂度矩阵）
- 从规划「派生」具体的 features
- 里程碑和时间线规划

**Dashboard 增强**：
- 新建 Feature 按钮
- Phase 0 Foundation 状态展示
- 项目级概览（不只是 feature 列表）

### 2.2 不包含内容（Out of Scope）

- 多人实时协作编辑
- 与外部项目管理工具（Jira、Linear）集成
- 自动代码生成

### 2.3 未来规划（Future Scope）

- AI 辅助架构建议
- 自动依赖分析（基于代码扫描）
- 与 GitHub Projects 集成

---

## 3. 用户与场景

### 3.1 目标用户

| 用户类型 | 描述 | 核心诉求 |
|----------|------|----------|
| 架构师 | 负责技术方案设计 | 可视化架构规划、模块划分 |
| PM | 负责需求和进度管理 | 需求优先级、派生 features |
| 开发者 | 执行具体 feature 开发 | 了解全局上下文和依赖 |

### 3.2 核心场景

#### 场景 1：架构师规划新项目

```
角色：架构师
目的：为新项目设计技术架构和模块划分
前置条件：项目需求已明确
步骤：
  1. 打开 HA Loop Desk，进入「架构规划」视图
  2. 创建模块划分图（前端、后端、基础设施）
  3. 定义模块之间的依赖关系
  4. 标记技术选型决策
  5. 导出为 Foundation 文档
预期结果：清晰的架构图 + 可执行的模块列表
```

#### 场景 2：PM 从规划派生 Features

```
角色：PM
目的：将架构规划转化为可执行的 feature 列表
前置条件：架构规划已完成
步骤：
  1. 查看架构师的模块划分
  2. 为每个模块创建对应的 feature
  3. 设置优先级和依赖顺序
  4. 点击「创建 Feature」自动生成目录结构
预期结果：docs/ 下生成多个 feature 目录，进度日志初始化
```

#### 场景 3：开发者了解全局上下文

```
角色：开发者
目的：理解当前 feature 在整体架构中的位置
前置条件：正在开发某个 feature
步骤：
  1. 在 Workspace 中查看「全局视图」
  2. 看到当前 feature 的上下游依赖
  3. 了解技术选型和架构约束
预期结果：避免「只见树木不见森林」的开发
```

---

## 4. 技术方案

{请在 Spec 阶段补充}

---

## 5. 依赖与集成

### 5.1 内部依赖

| 依赖模块 | 依赖内容 | 状态 |
|----------|----------|------|
| dashboard-view | 在 Dashboard 上增加入口 | 已有 |
| coding-GUI | 复用现有组件和样式 | 已有 |

### 5.2 外部依赖

| 外部系统 | 集成方式 | 状态 |
|----------|----------|------|
| Claude Code CLI | 调用 /new-feature 等命令 | 已有 |
| 文件系统 | 读写 docs/ 目录 | 已有 |

---

## 6. 里程碑

| 阶段 | 交付物 | 状态 |
|------|--------|------|
| Kickoff | 10_CONTEXT.md | Draft |
| Spec | 21_UI_FLOW_SPEC.md | 待开始 |
| Demo | 交互原型 | 待开始 |
| Design | 40_DESIGN_FINAL.md | 待开始 |
| Code | 功能实现 | 待开始 |
| Test | 测试报告 | 待开始 |
| Deploy | 上线 | 待开始 |

---

## 7. 相关文档

- 工作流总纲：`CC_COLLABORATION/04_AI_WORKFLOW.md`
- 进度日志：`docs/project-planning/90_PROGRESS_LOG.yaml`

---

## CHANGELOG

| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| v0.1 | 2024-12-31 | Claude | 初始版本 |
